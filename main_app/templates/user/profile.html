{% extends 'base.html' %}
{% load static %}
{% block extrahead %}
<!-- UIkit CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/css/uikit.min.css" />

<!-- UIkit JS -->
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit-icons.min.js"></script>

<!-- Static files -->
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css/' %}">
<link type ="text/css" rel="stylesheet" href="{% static 'css/profile.css/'%}">
{% endblock %}

{% block content %}

<h1>Profile</h1>
<div class="profile__container">
    <div class="card">
        <div class='profile-photo'>
            <img src="{{photo.url}}">
        </div>
            {% if photo.url == "https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg"%}
                {{value|linebreaks}}
                No Photos Uploaded
                {{value|linebreaks}}
            {% endif %}
            <form action="{% url 'add_user_photo' %}" enctype="multipart/form-data" method="POST" >
                {% csrf_token %}
                <div>
                    <div class='category-label' id='edit-photo'>
                        <b>Edit Photo</b>
                    </div>
                    <div class='upload-photo'>
                        <div class='choose-file'>
                            <input type="file" name="photo-file" >
                        </div>
                        <div class='submit-upload'>
                            <input type="submit" class="btn" value="Upload Photo">        
                        </div>
                    </div>
                </div>
            </form>
        <div class='profile-info'>
            <div class='category-label'>
                <b>My Profile</b>
            </div>
            <div class='user-stats'>
                <div class='user-stats__label'>
                    <b> Date joined:</b>
                    <b> Last Login:</b>
                </div> 
                <div class='user-stats__info'>
                    <b>{{request.user.date_joined}}</b>
                    <b>{{request.user.last_login}}</b>
                </div> 
            </div>
        </div>
        <div style='margin-top:4rem;display:flex;justify-content:space-evenly;'>
            <div style='width:10rem;text-align:center;'>
                <b>{{request.user}}</b>
                <hr>
            </div>
            <div style='width:10rem;text-align:center;'>
                <b>{{request.user.email}}</b> 
                <hr>
            </div>    
        </div>
        <div style='margin-top:2rem;display:flex;flex-direction:column;align-items:center;'>
            {% if request.user.id == user.id%}
                <a href="{% url 'edit_profile' %}" class="waves-effect waves-light btn-large" >Edit Info</a>
                    {% if request.user.is_staff %}
                        <a href="{% url 'show_my_reviews' %}" class="waves-effect waves-light btn-large" style='margin-top:1rem;'> My reviews </a>
                    {% endif %}
            {% endif %}
        </div>
    </div>

    {% comment %} counting comments in review {% endcomment %}
    {% include 'partials/comments/see-my-comments.html'%}
</div>
{% endblock %}